---
import "../styles/global.css";
import { ClientRouter } from "astro:transitions";
import GoogleAnalytics from '@astro-kits/google-analytics';
---
<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>Deenullah - The Way of Life</title>
		<ClientRouter />
		<script>
			/*to prevent Firefox FOUC, this must be here*/
			let FF_FOUC_FIX;
		</script>
		<GoogleAnalytics id="G-0WTLG2RKSX"/>
	</head>
	<body>
		<header>
			<div class="header-bar2 p-1 deenullah-white text-center text-base md:text-xl md:pt-2">بسم الله الرحمن الرحيم</div>
			<a href="/"><div class="deenullah-brown text-center">
				<h1 class="text-3xl md:text-5xl deenullah-regular deenullah-white p-2 md:pt-8 pt-3 ml-2">DEENULLAH</h1>
				<div class="deenullah-italic deenullah-white mt-[-8px] pb-2 md:pb-5 md:text-3xl">The Way of Life</div>
			</div></a>
			<div class="header-bar2 p-1 md:pt-2 deenullah-white text-sm p-1 text-center md:text-xl" id="data-container" transition:persist>&#8203;
			</div>
		</header>
		<slot />
		<footer>
			<div class="header-bar2 p-2 mt-4"></div>
			<div class="deenullah-brown deenullah-white md:flex text-center p-4">
				<div class="md:w-[33%] deenullah-regular text-3xl md:pt-[26px] pt-[12px] md:border-r-1 border-dashed">DEENULLAH<h4 class="deenullah-italic text-xl pb-2">The Way of Life</h3></div>
				<div class="md:w-[34%] md:pt-[28px] pt-[12px] md:border-r-1 border-dashed md:p-10">Notes and Articles by Nabeel Aejaz, an Islamic student from Karachi, Pakistan.</div>
				<div class="md:w-[33%] md:pt-[28px] pt-[18px] pb-4"><b>Contact</b><br><a href="mailto:salam@deenullah.com" class="deenullah-white decoration-dashed underline"><img src="../mail.svg" class="w-5 inline-block mr-2 ml-[-8px] mt-[-2px]">salam@deenullah.com</a></div>
			</div>
			<div class="text-center md:p-2 p-3 footer deenullah-white"><b>Deenullah</b> 1447 AH. All Rights Reserved.</div>
		</footer>
	</body>
</html>

<script>
	const dataContainer = document.getElementById('data-container');
	const date = new Date();
	let day = date.getDate() - 1;
	let month = date.getMonth() + 1;
	let year = date.getFullYear();
	let currentDate = `${day}-${month}-${year}`;
	const getUrl = 'https://api.aladhan.com/v1/gToH/' + currentDate + '?'; 
	const apiUrl = getUrl; 
	async function fetchDataAndDisplay() {
        try {
            const response = await fetch(apiUrl);
            const data = await response.json(); // Assuming the API returns JSON

            // Clear previous content (optional)
            dataContainer.innerHTML = ''; 

			const postElement = document.createElement('div');
                postElement.innerHTML = `
                    ${data.data.hijri.day} ${data.data.hijri.month.en} ${data.data.hijri.year}
                `;
                dataContainer.appendChild(postElement);

            // Iterate through the data and create HTML elements


        } catch (error) {
            console.error('Error fetching or displaying data:', error);
            dataContainer.innerHTML = '<p></p>';
        }
    }
	fetchDataAndDisplay();
</script>

<style>
	@import "tailwindcss";
@import url('https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap');

html, body {
		margin: 0;
		width: 100%;
		height: 100%;
		background-color: #e8d1c5;
    font-family: "Roboto", sans-serif;
	}
</style>